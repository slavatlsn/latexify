# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ñ–æ—Ä–º—É–ª (bot.py)

## –û–ø–∏—Å–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å `bot.py` —Ä–µ–∞–ª–∏–∑—É–µ—Ç Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:
1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏
2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤—ã–µ –º–æ–¥–µ–ª–∏
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ LaTeX

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install telebot opencv-python numpy torch ultralytics
```
2. –°–æ–∑–¥–∞–π—Ç–µ `config.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```python
tg_token = "–í–ê–®_–¢–ï–õ–ï–ì–†–ê–ú_–¢–û–ö–ï–ù"  # –ü–æ–ª—É—á–∏—Ç—å —É @BotFather
my_device = "cpu"  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "cuda" –¥–ª—è GPU
padding = 5  # –û—Ç—Å—Ç—É–ø—ã –ø—Ä–∏ –æ–±—Ä–µ–∑–∫–µ —Å–∏–º–≤–æ–ª–æ–≤
```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python main.py
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞

### 1. –ö–æ–º–∞–Ω–¥–∞ /start
```python
@bot.message_handler(commands=['start'])
def start_bot(message):
    ...
```
- –í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏:
  ```
  [–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ñ–æ—Ä–º—É–ª—É] [–ü–æ–º–æ—â—å] [–°—Ç–∞—Ä—Ç]
  ```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```python
@bot.message_handler(content_types=['photo'])
def handle_photo(message):
    ...
```
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ/–¥–æ–∫—É–º–µ–Ω—Ç (JPEG/PNG)
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ grayscale —á–µ—Ä–µ–∑ OpenCV
- –í—ã–∑—ã–≤–∞–µ—Ç `get_latex()` –∏–∑ model.py
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
  ```latex
  $E = mc^2$
  ```

### 3. –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (process_image)
```python
def process_image(file_id):
    try:
        # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ Telegram
        file_info = bot.get_file(file_id)
        img = cv2.imdecode(...)
        
        # –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å
        latex_code = '$' + '$\n$'.join(get_latex(...)) + '$'
        
        return {'status': 'success', 'result': latex_code}
    except Exception as e:
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ log.txt
        return {'status': 'error', ...}
```

---

## –ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /start
–ë–æ—Ç: –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! ü§ñ –≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å...

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ —Ñ–æ—Ä–º—É–ª—ã]
–ë–æ—Ç: ‚úÖ –§–æ—Ä–º—É–ª–∞ —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞!
     –†–µ–∑—É–ª—å—Ç–∞—Ç:
     ```LaTeX
     $x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$
     ```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü–æ–º–æ—â—å
–ë–æ—Ç: üÜò **–ü–æ–º–æ—â—å** ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã...
```

---

## –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
1. –ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏: `conf=0.15` (pos_detect.py)
2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫: —Ñ–∞–π–ª `log.txt`
3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU: —á–µ—Ä–µ–∑ `my_device = "cuda"` –≤ config.py
4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 360p
   - –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
   - –û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
```
–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç (bot.py)
    ‚îÇ
    ‚ñº
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Üí OpenCV (–ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥)
    ‚îÇ
    ‚ñº
pos_detect.py (YOLO) ‚Üí –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
    ‚îÇ
    ‚ñº
sym_detect.py (CNN) ‚Üí –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤
    ‚îÇ
    ‚ñº
model.py ‚Üí –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí LaTeX
```
